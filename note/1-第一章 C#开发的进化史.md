## 第一章 C#开发的进化史

### 1.1 简单数据类型

```csharp
//不再有任何代码与属性关联
class Product
{
    public string Name {get;private set;}
    public decimal Price {get;private set;}
    public Product(string name, decimal price)
    {
        Name = name;
        Price = price;
    }
}

public static List<Product> GetSampleProducts()
{
    return new List<Product>
    {
        new Product { Name = "aaa", Price = 5.5},
        new Product { Name = "bbb", Price = 8.5},
        new Product { Name = "ccc", Price = 5.5}
    }
}
```

### 1.2 排序和过滤

```csharp
List<Product> products = Product.GetSampleProducts();
foreach (Product product in products.Where(p => p.Price > 10))
{
    
}
```

### 1.3 未处理的数据

```csharp
//可空值类型
decimal? price = null
```

### 1.4 LINQ

```csharp
List<Product> products = Product.GetSampleProducts();
List<Supplier> suppliers = Supplier.GetSampleSuppliers();
var filtered = from p in products
				join s in suppliers
					on p.SupplierID equals s.SupplierID
				where p.Price >10
    			orderby s.Name, p.Name
    			select new { SupplierName = s.Name, ProductName = p.Name};
```

```xml
<Data>
    <Products>
    	<Product Name="ProductA" Price="53.2" SupplierID ="1"></Product>
        <Product Name="ProductB" Price="53.2" SupplierID ="2"></Product>
        <Product Name="ProductB" Price="53.2" SupplierID ="3"></Product>
    </Products>
    <Suppliers>
    	<Supplier Name="SupplierA" SupplierID="1"></Supplier>
        <Supplier Name="SupplierB" SupplierID="2"></Supplier>
    </Suppliers>
</Data>
```

```csharp
XDocument doc = XDocument.Load("data.xml");
var filtered = from p in doc.Descendants("Product")
    			join s in doc.Descendants("Supplier")
    				on (int)p.Atttribute("SupplierID")
    				equals (int)s.Atttribute("SupplierID")
    			where (decimal)p.Attribute("Price") > 10
    			orderby (string)s.Attribute("Name"),
    					(string)p.Attribute("Name")
                select new
                        {
                            SupplierName = (string)s.Attribute("Name"),
                            ProductName = (string)p.Attribute("Name")
                        }
```

