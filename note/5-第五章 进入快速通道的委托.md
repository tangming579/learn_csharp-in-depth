## 第五章 进入快速通道的委托

### 委托的逆变性与协变性

- 协变性是指方法能返回从委托的**返回类型派生**的一个类型。
- 逆变性是指方法获取的参数可以是委托的**参数类型的基类**。

```csharp
delegate Object MyCallback(FileStream s);
string SomeMethod(Stream s);
```

如上面的例子，SomeMethod 的返回类型(string)派生自委托的返回类型(Object)；这种协变性是允许的。SomeMethod 的参数类型(Stream)是委托的参数类型(FileStream)的基类；这种逆变性是允许的。

注意：**只有引用类型才支持协变性与逆变性，值类型或void不支持。**所以不能把下面的方法绑定到MyCallBack委托：

```csharp
int SomeOtherMethod(Stream s);
```

虽然 SomeOtherMethod 的返回类型(int)派生自MyCallback的返回类型(Object)，但这种形式的协变性是不允许的，因为int是值类型。显然，值类型和void之所以不支持，**是因为它们的存储结构是变化的，而引用类型的存储结构始终是一个指针。**